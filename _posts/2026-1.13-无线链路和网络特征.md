---
layout: post
title: "无线链路和网络特征"
date: 2026-1-13
tags: [编程]
comments: true
author: Minrain
---
无线链路的特征有：一，递减的信号强度；二，来自其它源的干扰；三，多路径传播。这导致无线链路传输距离受限，误码率高。

## 7.2 无线链路中的问题
隐藏节点问题：A->B,C->B，由于A,C距离过远无法互相检测，但A,C都连接到B，就有可能A,C同时给B发消息，造成干扰。

暴露节点问题：A->B，C->D，C监听到B正在被A占用，不敢对D发，但实际上对D发不会造成实际影响。

CDMA(码分多址)技术：使用多国语言在一个房间内说话，互不干扰。具体而言，任何人想说话就说话（随时发送信号），但说的是不同语言（每个乘一个地址码），接收方会这种语言就能听懂，其它的都是噪音（解码用专用地址码，使对应信号重新聚集，其它的会被当作噪音丢弃。）

## 802.11无线局域网架构(Wi-Fi)
该体系的基本构成单位是BSS（基本服务集,Basic Service Set）,由一个接入点(AP,Access Point，可以当作基站)和若干无线终端组成。

802.11将通信频道分为若干信道，每个BSS分配一个（每个AP一个，信道可能相互干扰）。主机通过被动扫描或主动扫描，必须与一个AP关联。

被动扫描：主机接收AP发送的信标帧，选择一个AP进行连接请求。主动扫描：主机向AP发送请求帧，AP回应；主机选择一个AP连接，结束。

## 802.11 MAC协议
名为CSMA/CA（载波监听/冲突避免协议，CA,Collision Avoidance）。它是无线网络的交通规则。由于无线设备发送时声音太大，会盖过别人，所以没办法一边说一边检测；另外，由于隐藏节点问题，你很难检测到别人是否在说话。

它采用如下规则：先听再说->没人说话经过一段静默期(DIFS，分布式帧间间隔)，确保真的没人说话后发送->有人说话就随机生成一个数字。该数字当信道空闲时减少，为0就可以发送->发送后，在目的地通过一个SIFS（短帧间间隔）的时间，目的地回发确认报文->接收到确认报文，发下一个；否则再随机生成一个数字，重新发送。

## RTS和CTS解决碰撞问题
举手发言的解决方案，针对长信息发送。A、C都要发信息给B，A先广播：老师我要发言，需要X秒！B接收后广播(C也能听到)：A同学你说吧，给你X秒！C收到进入延迟，直到A说完后并收到B的ACK后。每次B收到消息后，都会有一个SIFS的反应时间。

CSMA/CD在发送过程中检测冲突，不使用确认机制
CSMA/CA在发送过程中不检测冲突，使用确认机制
这是两者最大的区别。

## 802.11帧以及终端在子网中的移动
802.11帧对比以太帧，关键在于有3个地址，一个AP（基站）的，一个设备的（无线设备），一个路由的。AP在路由看来是隐形的，充当翻译官角色，在802.11帧和以太帧间翻译。地址三指的是传进来的路由地址。

在子网中的移动原理如下：假设AP1和AP2同属于一个交换机，移动设备检测AP信号强度，接入新AP时，新AP会在全网发送广播，告诉交换机该设备位置变化；交换机更新，问题解决。

但如果AP1和AP2不属于一个交换机呢？

下面引入概念：永久地址：手机联网的时候，永久属于它的IP地址，类似身份证号，不会轻易改变。
归属网络：永久地址属于的网络。
归属代理：归属网络的路由器。
外地网络：现在处于的网络。
外地代理：现在网络的代理。
转交地址：现在网络中的IP地址。

移动节点进入外地网络，首先在外地网络注册，然后外地网络告诉归属网络移动节点的位置。其它人给移动节点发信息，有两种方式。间接选路和直接选路。间接选路：先发给归属代理，归属代理转交移动节点；直接选路：问一下归属代理，直接发给移动节点。